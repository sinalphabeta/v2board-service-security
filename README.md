<div align="center">
    <a href="https://r8d.pro"><img src="https://github.com/dc8683/picx-images-hosting/raw/master/docs/AirSecurity-LOGO@1x.86twptctpt.webp" alt="airbuddy rocket theme" width="150" /></a>
    <h1>AirBuddy Security Service</h1>
    <p><b> v2board/xboard/xiaoboard </b>å¼€æºåç«¯ä¸­é—´ä»¶æœåŠ¡ï¼Œé˜²å¢™å»ç‰¹å¾ã€ä¸æ€•å¢™ã€ä½“ç§¯è¶…å°çš„å…è´¹ä¸­é—´ä»¶æœåŠ¡ï¼Œæ”¯æŒ V2B/XB/xiaoboardï¼Œæ”¯æŒåŠ å¯†è½¬å‘æ¥å£è¯·æ±‚ã€å“åº”ï¼Œæ”¯æŒå…ç™»è·å–å•†å“åˆ—è¡¨ã€å…ç™»è·å–ä»˜æ¬¾æ–¹ã€å…ç™»åˆ›å»ºè®¢å•æ¥å£ï¼Œè‡ªå»º SMTPï¼Œæ”¯æŒè‡ªå®šä¹‰é‚®ä»¶æ¨¡æ¿</p>
</div>

------------------------------


## é¡¹ç›®ä»‹ç»

* é€‚é…åç«¯é¢æ¿ï¼š [**v2board**](https://github.com/v2board/v2board) \ [**wyxboard**](https://github.com/wyx2685/v2board) \ [**xboard**](https://github.com/cedar2025/Xboard)
* æ”¯æŒä¸»é¢˜ï¼š[ğŸš€ AirRocket Theme](https://github.com/dc8683/v2board-theme-airrocket)
* åœ¨çº¿å®¢æœï¼š[ğŸ„â€â™‚ï¸ AirBuddy Service](https://t.me/R8d_pro_bot)
* äº¤æµç¾¤ç»„ï¼š[ğŸš€ AirBuddy Theme](https://t.me/themebuddy)
* æˆæƒæ–¹å¼ï¼šå…è´¹å¼€æº
* ä½¿ç”¨æ–‡æ¡£ï¼š[ğŸ“– AirBuddy Docs](https://r8d.pro/docs)


### 1. åŠ å¯†è½¬å‘

å¯ä»¥å¯¹æ¥å£çš„è¯·æ±‚å’Œå“åº”è¿›è¡ŒåŠ å¯†å¤„ç†ï¼Œå°±åƒç»™ä½ çš„æ•°æ®ç©¿ä¸Šäº†ä¸€å±‚ä¿æŠ¤è¡£ï¼Œé˜²æ­¢è¢«å¢™ï¼Œè®©æ•°æ®ä¼ è¾“æ›´åŠ å®‰å…¨ã€‚

![](https://github.com/dc8683/picx-images-hosting/raw/master/docs/Clipboard---2025-06-17-15.06.21.6t7dmwj0sn.webp)

### 2. å…ç™»æ¥å£

* å…ç™»è·å–å•†å“åˆ—è¡¨ï¼šå¯ä»¥åœ¨ç”¨æˆ·ä¸ç™»å½•çš„æƒ…å†µä¸‹è·å–å•†å“åˆ—è¡¨ï¼Œæ–¹ä¾¿ç”¨æˆ·æµè§ˆå’Œé€‰æ‹©å•†å“
* å…ç™»è·å–ä»˜æ¬¾æ–¹å¼ï¼šå¯ä»¥åœ¨ç”¨æˆ·ä¸ç™»å½•çš„æƒ…å†µä¸‹è·å–ä»˜æ¬¾æ–¹ä¿¡æ¯ï¼Œæ–¹ä¾¿ç”¨æˆ·è¿›è¡Œæ”¯ä»˜
* å…ç™»åˆ›å»ºè®¢å•æ¥å£ï¼šå¯ä»¥åœ¨ç”¨æˆ·ä¸ç™»å½•çš„æƒ…å†µä¸‹åˆ›å»ºè®¢å•å¹¶å®ç°è‡ªåŠ¨æ³¨å†Œç™»å½•è´¦å·ï¼Œç®€åŒ–äº†ç”¨æˆ·çš„æ“ä½œæµç¨‹

### 3. è‡ªå»º SMTP

å¯ä»¥è‡ªå»º SMTP æœåŠ¡å™¨ï¼Œæ”¯æŒè‡ªå®šä¹‰é‚®ä»¶æ¨¡æ¿ï¼Œæ–¹ä¾¿ç”¨æˆ·å‘é€é‚®ä»¶é€šçŸ¥å’Œè¥é”€é‚®ä»¶


### 4. ç¯å¢ƒå˜é‡

åœ¨``.env.example``æ–‡ä»¶ä¸­åŒ…å«äº†ä¸»è¦çš„ç¯å¢ƒå˜é‡é…ç½®ï¼Œæ‚¨å¯ä»¥æ ¹æ®éœ€è¦è¿›è¡Œä¿®æ”¹ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ä¸»è¦çš„ç¯å¢ƒå˜é‡ï¼š

* ADMIN_TOKEN: é¢æ¿ç®¡ç†å‘˜ä»¤ç‰Œï¼Œç”¨äºèº«ä»½éªŒè¯å’Œæƒé™æ§åˆ¶ï¼Œå¦‚æœä½ å¡«äº† `ADMIN_EMAIL` å’Œ `ADMIN_PASSWORD` åˆ™ä¸éœ€è¦å¡«å…¥ `ADMIN_TOKEN`ï¼Œå› ä¸ºæ¯æ¬¡å¯åŠ¨æœåŠ¡éƒ½ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªæ–°çš„ `ADMIN_TOKEN`
* ADMIN_EMAIL: é¢æ¿ç®¡ç†å‘˜é‚®ç®±è´¦å·
* ADMIN_PASSWORD: é¢æ¿ç®¡ç†å‘˜å¯†ç 
* BACKEND_API_PREFIX: é¢æ¿ç®¡ç†åç«¯ API å‰ç¼€ï¼Œå³ç®¡ç†é¢æ¿çš„åå°è·¯å¾„
* DOMAIN: ä½ çš„åç«¯åŸŸåï¼Œç¤ºä¾‹: https://api.xxx.com ï¼Œå¦‚æœæ­¤æœåŠ¡å’Œé¢æ¿åœ¨åŒä¸€å°æœåŠ¡å™¨ä¸Šï¼Œå¯ä»¥ä½¿ç”¨å±€åŸŸç½‘åœ°å€ï¼ˆå±€åŸŸç½‘é€šä¿¡é€Ÿåº¦æœ€ä½³ï¼Œä¸”å¯ä»¥å…³é—­ v2board/xboard é¢æ¿å¯¹å¤–çš„æš´éœ²ï¼‰ï¼Œç¤ºä¾‹: http://127.0.0.1:3000
* PASSWORD: AES åŠ å¯†å¯†ç ï¼Œç”¨äºåŠ è§£å¯†ï¼Œè¯·å’Œå‰ç«¯ä¸­çš„ security.password ä¿æŒä¸€è‡´
* MAIL_HOST: SMTP é‚®ä»¶æœåŠ¡å™¨åœ°å€
* MAIL_PORT: SMTP é‚®ä»¶æœåŠ¡å™¨ç«¯å£
* MAIL_SECURE: SMTP é‚®ä»¶æœåŠ¡å™¨å®‰å…¨åè®®ï¼Œtrue æˆ– false
* MAIL_USER: SMTP é‚®ä»¶æœåŠ¡å™¨ç”¨æˆ·å
* MAIL_PASS: SMTP é‚®ä»¶æœåŠ¡å™¨å¯†ç 
* MAIL_NEWUSER_SUBJECT: æ–°ç”¨æˆ·æ³¨å†Œé‚®ä»¶ä¸»é¢˜
* MAIL_NEWUSER_URL: æ–°ç”¨æˆ·æ³¨å†Œé‚®ä»¶æ¨¡æ¿é“¾æ¥ï¼Œç”¨äºå‘æ–°ç”¨æˆ·å‘é€æ³¨å†ŒæˆåŠŸå’Œè´¦å·å¯†ç çš„é€šçŸ¥ï¼Œéœ€è‡ªè¡Œåˆ›å»ºä¸€ä¸ªé‚®ä»¶æ¨¡æ¿æ–‡ä»¶ï¼Œå¹¶å°†å…¶æ”¾ç½®åœ¨ cdn ä¸Šï¼Œä½œä¸ºé“¾æ¥ï¼Œè®¾ç½®åˆ° `MAIL_NEWUSER_URL` ç¯å¢ƒå˜é‡ä¸­ï¼Œå¦‚æœä¸è®¾ç½®ï¼Œå°†é»˜è®¤é‡‡ç”¨çº¯æ–‡æœ¬æ¨¡æ¿

> tips: å¦‚æœä½ åªæ˜¯éœ€è¦é˜²å¢™é€šä¿¡ï¼Œè€Œä¸éœ€è¦å…ç™»æ”¯ä»˜æ³¨å†Œä¸€ä½“çš„è¯ï¼Œå°±åªéœ€è¦é…ç½® `PASSWORD` å’Œ `DOMAIN` å³å¯ï¼Œå…¶ä»–é…ç½®å¯ä»¥ä¸å¡«

### 5. é‚®ä»¶æ¨¡æ¿

æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªé»˜è®¤çš„é‚®ä»¶æ¨¡æ¿ï¼Œä½ å¯ä»¥åœ¨ [NewUser Email Template](https://github.com/dc8683/picx-images-hosting/blob/master/email-template/NewUser.html) ä¸‹è½½ä¸‹æ¥ä¿®æ”¹ç½‘å€å’Œå†…å®¹ï¼Œæˆ–è€…è‡ªè¡Œåˆ›å»ºä¸€ä¸ªæ–°çš„é‚®ä»¶æ¨¡æ¿æ–‡ä»¶ï¼Œå¹¶å°†å…¶æ”¾ç½®åœ¨ cdn ä¸Šï¼Œä½œä¸ºé“¾æ¥ï¼Œè®¾ç½®åˆ° `MAIL_NEWUSER_URL` ç¯å¢ƒå˜é‡ä¸­ï¼Œå¦‚æœä¸è®¾ç½®ï¼Œå°†é»˜è®¤é‡‡ç”¨çº¯æ–‡æœ¬æ¨¡æ¿ã€‚

æ­¤å¤–ï¼Œå¦‚æœä½ éœ€è¦å®šåˆ¶æ›´å¥½çœ‹çš„é‚®ä»¶æ¨¡æ¿ï¼Œæˆ‘ä»¬éå¸¸æ¨èä½¿ç”¨ [wand email](https://www.wand.email/)ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸å¥½ç”¨çš„ AI ä¸€é”®ç”Ÿæˆé‚®ä»¶æ¨¡æ¿å·¥å…·

## å®‰è£…å’Œä½¿ç”¨

æ­¤é¡¹ç›®ä½ å¯ä»¥è‡ªè¡Œæ„å»ºæˆ–è€…ä½¿ç”¨ release ä¸­çš„äº§ç‰©ï¼Œrelease ä¸­åŒ…å«äº† js æ„å»ºäº§ç‰©ã€docker äº§ç‰©ã€äºŒè¿›åˆ¶æ–‡ä»¶ã€æºç åŒ…ï¼Œä»¥ä¸‹éƒ¨ç½²ä¸ä½¿ç”¨æ–¹å¼å‡ä»¥ release ä¸­çš„äº§ç‰©ä¸ºä¾‹

### docker éƒ¨ç½²ä½¿ç”¨

1. ä¸‹è½½ release ä¸­çš„ docker äº§ç‰©ï¼Œæ–‡ä»¶åç§°ä¸º `airbuddy-security-docker-image-ç‰ˆæœ¬å·.tar`
2. ä¸Šä¼ åˆ°å®å¡”ä¸­çš„æ–‡ä»¶ç›®å½•ï¼Œä¾‹å¦‚ `/www/wwwroot/security`
3. åœ¨å®å¡”ä¸­æ‰“å¼€ docker - æœ¬åœ°é•œåƒï¼Œç‚¹å‡»å¯¼å…¥é•œåƒï¼Œé€‰æ‹©åˆšæ‰ä¸Šä¼ çš„ `airbuddy-security-docker-image-ç‰ˆæœ¬å·.tar` æ–‡ä»¶ï¼Œæ­¤æ—¶é•œåƒåˆ—è¡¨ä¸­ä¼šå¤šå‡ºä¸€ä¸ª `airbuddy-security:ç‰ˆæœ¬å·` é•œåƒï¼Œå¦‚å›¾æ‰€ç¤º: ![](https://github.com/dc8683/picx-images-hosting/raw/master/docs/Clipboard---2025-06-17-16.34.38.2obsamib0p.webp)

4. æ‚¨å¯ä»¥ä½¿ç”¨ docker å‘½ä»¤æˆ–è€…ç•Œé¢ä¸­çš„åˆ›å»ºå®¹å™¨æ¥åˆ›å»ºå®¹å™¨ï¼Œä¸ºäº†å„ä½ç”¨æˆ·æ›´æ–¹ä¾¿ä½¿ç”¨ï¼Œä»¥ä¸‹æä¾›ä¸€ä»½ docker ç¼–æ’æ–‡ä»¶ï¼Œåœ¨å®å¡”ä¸­ä½¿ç”¨å®¹å™¨ç¼–æ’æ¥å¯åŠ¨æœåŠ¡ï¼Œä½ å¯ä»¥å°†å…¶è½¬æˆå‘½ä»¤æ¥ä½¿ç”¨
    
   ```yaml
    version: '3'
    
    services:
      airbuddy-security-service:
        # æ›¿æ¢ä¸ºä½ å®é™…çš„é•œåƒåç§°å’Œæ ‡ç­¾
        image: airbuddy-security:1.0.1
        container_name: airbuddy-security-service
        restart: always
        ports:
          # å°†å®¹å™¨å†…éƒ¨çš„ 3000 ç«¯å£æ˜ å°„åˆ°ä¸»æœºçš„ 12020 ç«¯å£
          - "12020:3000"
        environment:
          # ä»¥ä¸‹æ˜¯ç¯å¢ƒå˜é‡é…ç½®ï¼Œè¯·æ ¹æ®å®é™…æƒ…å†µä¿®æ”¹
          - ADMIN_EMAIL=${ADMIN_EMAIL}
          - ADMIN_PASSWORD=${ADMIN_PASSWORD}
          - BACKEND_API_PREFIX=${BACKEND_API_PREFIX}
          - DOMAIN=${DOMAIN}
          - PASSWORD=${PASSWORD}
          - MAIL_HOST=${MAIL_HOST}
          - MAIL_PORT=${MAIL_PORT}
          - MAIL_SECURE=${MAIL_SECURE}
          - MAIL_USER=${MAIL_USER}
          - MAIL_PASS=${MAIL_PASS}
          - MAIL_NEWUSER_SUBJECT=${MAIL_NEWUSER_SUBJECT}
          - MAIL_NEWUSER_URL=${MAIL_NEWUSER_URL}
    ```

5. æœåŠ¡å¯åŠ¨åï¼Œåœ¨ç½‘ç«™ - åå‘ä»£ç†ï¼Œç‚¹å‡»æ·»åŠ åä»£ï¼ŒåŸŸåè®¾ç½®ä½ å¯¹å¤–å…¬å¼€çš„åŸŸåï¼Œç›®æ ‡ url å¡«å†™æœ¬æœºåœ°å€ + compose ä¸­çš„ç«¯å£å·ï¼Œä¾‹å¦‚ä¸Šé¢compose å¯¹åº”çš„ç«¯å£ç¤ºä¾‹: http://127.0.0.1:12020 , åç§°å¯ä»¥éšæ„å¡«å†™ï¼Œä¾‹å¦‚ `airbuddy-security`ï¼Œç„¶åç‚¹å‡»æäº¤å³å¯ï¼Œå¦‚ä¸‹æ‰€ç¤º:
![](https://github.com/dc8683/picx-images-hosting/raw/master/docs/fandai.4n7z15bffe.webp)

æœ€åï¼Œé€šè¿‡è®¿é—® `https://ä½ é…ç½®çš„åŸŸå/api/v1/guest/comm/config` æ¥æµ‹è¯•æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œï¼Œå¦‚æœè¿”å›äº†é…ç½®æ•°æ®ï¼Œåˆ™è¡¨ç¤ºæœåŠ¡è¿è¡Œæ­£å¸¸

> Tips: å¦‚æœä½ ä½¿ç”¨äº†å®å¡”çš„ docker å®¹å™¨ç¼–æ’åŠŸèƒ½ï¼Œå¯ä»¥åœ¨å®å¡”ä¸­ç›´æ¥ç¼–è¾‘ç¯å¢ƒå˜é‡ï¼Œè¿˜èƒ½åœ¨å®å¡”ä¸­æŸ¥çœ‹æ—¥å¿—ï¼Œæ–¹ä¾¿è°ƒè¯•å’Œç»´æŠ¤ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º:
>  
> ![](https://github.com/dc8683/picx-images-hosting/raw/master/docs/Clipboard---2025-06-19-00.34.24.6pnrqx732d.webp)

### js éƒ¨ç½²ä¸ä½¿ç”¨

> è¯¥éƒ¨ç½²æ–¹å¼éœ€è¦å…ˆç¡®ä¿å…¨å±€å®‰è£…äº† Node.js ç­‰ä¾èµ–å·¥å…·ï¼Œä»¥ä¸‹æ˜¯ç¯å¢ƒå®‰è£…æ­¥éª¤ï¼Œå¦‚è‹¥é‡åˆ°é—®é¢˜è¯·è‡ªè¡Œç™¾åº¦
> * Node.js 20+ ç‰ˆæœ¬

```bash
# Download and install nvm:
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.40.3/install.sh | bash

# in lieu of restarting the shell
\. "$HOME/.nvm/nvm.sh"

# ä¸‹è½½ä¸å®‰è£… Node.js:
nvm install 22

# éªŒè¯ Node.js ç‰ˆæœ¬:
node -v # Should print "v22.16.0".
nvm current # Should print "v22.16.0".

# éªŒè¯ npm ç‰ˆæœ¬:
npm -v # Should print "10.9.2".
```

1. ä¸Šä¼  `index.js` æ–‡ä»¶åˆ°é¡¹ç›®ç›®å½•ï¼Œå¹¶å°†ä»¥ä¸‹ä»£ç ï¼ˆå…·ä½“ç¯å¢ƒå˜é‡æ ¹æ®è‡ªå·±çš„æƒ…å†µä¿®æ”¹ï¼‰ä¿å­˜ä¸º `js-start.sh` ï¼ˆæ–‡ä»¶åéšæ„ï¼Œåç¼€ä¸€å®šæ˜¯`.sh`ï¼‰ï¼Œç¼–è¾‘å¥½ä»¥åä¿å­˜ï¼Œåœ¨ç»ˆç«¯æ‰§è¡Œ `chmod +x js-start.sh` ä½¿å…¶å…·æœ‰å¯æ‰§è¡Œæƒé™

   ```bash
   #!/bin/bash

   # è®¾ç½®ç¯å¢ƒå˜é‡, å‚è€ƒä¸Šé¢çš„ç¯å¢ƒå˜é‡è¯´æ˜
   export PORT=12020 # ç«¯å£å·
   export ADMIN_EMAIL=xxx@gmail.com # é¢æ¿ç®¡ç†å‘˜é‚®ç®±è´¦å·
   export ADMIN_PASSWORD=xxxx # é¢æ¿ç®¡ç†å‘˜å¯†ç 
   export BACKEND_API_PREFIX=xxx # é¢æ¿ç®¡ç†åç«¯ API å‰ç¼€
   export DOMAIN=https://xxx.r8d.pro
   export PASSWORD=89236475 # AES åŠ å¯†å¯†ç ï¼Œå‰ç«¯å’Œåç«¯éœ€è¦ä¿æŒä¸€è‡´
   export MAIL_HOST=smtp.gmail.com # SMTP é‚®ä»¶æœåŠ¡å™¨åœ°å€
   export MAIL_PORT=465
   export MAIL_SECURE=true
   export MAIL_USER=xxx@gmail.com # SMTP é‚®ä»¶æœåŠ¡å™¨ç”¨æˆ·å
   export MAIL_PASS=xxx # SMTP é‚®ä»¶æœåŠ¡å™¨å¯†ç 
   export MAIL_NEWUSER_SUBJECT='æ¬¢è¿åŠ å…¥ AirBuddy'
   export MAIL_NEWUSER_URL=https://xxx.com/xxx.html # æ–°ç”¨æˆ·æ³¨å†Œé‚®ä»¶æ¨¡æ¿é“¾æ¥
   
   # è¿è¡Œç¨‹åº æ›¿æ¢ä¸ºä½ çš„å®é™…è·¯å¾„
   /root/.nvm/versions/node/v22.16.0/bin/node /www/wwwroot/security/index.js
   ```
   > æ³¨æ„: ä¸‹é¢çš„ä»£ç ä¸­ï¼Œ`/root/.nvm/versions/node/v22.16.0/bin/node` æ˜¯ Node.js çš„å®‰è£…è·¯å¾„ï¼Œè¯·æ ¹æ®å®é™…æƒ…å†µä¿®æ”¹ä¸ºä½ å®‰è£…çš„ Node.js è·¯å¾„ï¼Œå¦‚ä¸çŸ¥é“ Node.js çš„å®‰è£…è·¯å¾„ï¼Œå¯ä»¥åœ¨ç»ˆç«¯æ‰§è¡Œ `which node` æ¥æŸ¥çœ‹ Node.js çš„å®‰è£…è·¯å¾„ï¼Œé€šå¸¸æ˜¯ `/usr/local/bin/node` æˆ–è€… `/usr/bin/node`ï¼Œå¦‚æœä½ ä½¿ç”¨äº† nvm å®‰è£… Node.jsï¼Œåˆ™è·¯å¾„ä¸º `/root/.nvm/versions/node/v22.16.0/bin/node`ï¼Œè¯·æ ¹æ®å®é™…æƒ…å†µä¿®æ”¹

   ![](https://github.com/dc8683/picx-images-hosting/raw/master/docs/Clipboard---2025-06-19-01.20.51.4cl59rq7a1.webp)

2. åœ¨è½¯ä»¶å•†åº—ä¸­æ‰“å¼€ `è¿›ç¨‹å®ˆæŠ¤ç®¡ç†å™¨`ï¼Œ(å¦‚æœæ²¡æœ‰å®‰è£…ï¼Œè¯·å…ˆå®‰è£…)ï¼Œç‚¹å‡»æ·»åŠ å®ˆæŠ¤è¿›ç¨‹ï¼Œåç§°å¤‡æ³¨éšæ„ï¼Œå¯åŠ¨ç”¨æˆ·é€‰æ‹©`root`ï¼Œè¿è¡Œç›®å½•é€‰æ‹© js å’Œ sh æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ï¼Œå¯åŠ¨å‘½ä»¤åŠ¡å¿…å¡«å†™ç»å¯¹è·¯å¾„ï¼Œç‚¹å‡»ç¡®å®šåï¼Œå³å¯å¼€å¯å®ˆæŠ¤è¿›ç¨‹ï¼Œå®ˆæŠ¤è¿›ç¨‹ä¼šè‡ªåŠ¨è¿è¡Œ `js-start.sh` è„šæœ¬ï¼Œè„šæœ¬ä¸­ä¼šè®¾ç½®ç¯å¢ƒå˜é‡å¹¶è¿è¡Œ `index.js` æ–‡ä»¶ï¼Œæ­¤æ—¶ï¼Œä½ å¯ä»¥åœ¨è¿›ç¨‹å®ˆæŠ¤ç®¡ç†å™¨ä¸­çœ‹åˆ°å®ˆæŠ¤è¿›ç¨‹å·²ç»å¯åŠ¨ï¼Œå¹¶ä¸”å¯ä»¥æŸ¥çœ‹æ—¥å¿—è¾“å‡ºï¼Œç¡®ä¿æœåŠ¡æ­£å¸¸è¿è¡Œ
   ![](https://github.com/dc8683/picx-images-hosting/raw/master/docs/Clipboard---2025-06-19-01.23.26.73u7hucbbv.webp)
   ![](https://github.com/dc8683/picx-images-hosting/raw/master/docs/Clipboard---2025-06-19-01.27.49.2obsckzx3w.webp)

3. æœåŠ¡å¯åŠ¨åï¼Œåœ¨ç½‘ç«™ - åå‘ä»£ç†ï¼Œç‚¹å‡»æ·»åŠ åä»£ï¼ŒåŸŸåè®¾ç½®ä½ å¯¹å¤–å…¬å¼€çš„åŸŸåï¼Œç›®æ ‡ url å¡«å†™æœ¬æœºåœ°å€ + compose ä¸­çš„ç«¯å£å·ï¼Œä¾‹å¦‚ä¸Šé¢compose å¯¹åº”çš„ç«¯å£ç¤ºä¾‹: http://127.0.0.1:12021 , åç§°å¯ä»¥éšæ„å¡«å†™ï¼Œä¾‹å¦‚ `airbuddy-security`ï¼Œç„¶åç‚¹å‡»æäº¤å³å¯ï¼Œå¦‚ä¸‹æ‰€ç¤º:
   ![](https://github.com/dc8683/picx-images-hosting/raw/master/docs/fandai.4n7z15bffe.webp)

æœ€åï¼Œé€šè¿‡è®¿é—® `https://ä½ é…ç½®çš„åŸŸå/api/v1/guest/comm/config` æ¥æµ‹è¯•æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œï¼Œå¦‚æœè¿”å›äº†é…ç½®æ•°æ®ï¼Œåˆ™è¡¨ç¤ºæœåŠ¡è¿è¡Œæ­£å¸¸


### äºŒè¿›åˆ¶æ–‡ä»¶éƒ¨ç½²ä½¿ç”¨

1. ä¸‹è½½ release ä¸­çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œæ–‡ä»¶åç§°ä¸º `airbuddy-security-executable
`ï¼Œå°†å…¶ä¸Šä¼ åˆ°æœåŠ¡å™¨çš„ä»»æ„ç›®å½•ä¸‹ï¼Œä¾‹å¦‚ `/www/wwwroot/security`ï¼Œå¹¶å°†ä»¥ä¸‹ä»£ç ï¼ˆå…·ä½“ç¯å¢ƒå˜é‡æ ¹æ®è‡ªå·±çš„æƒ…å†µä¿®æ”¹ï¼‰ä¿å­˜ä¸º `executable
-start.sh` ï¼ˆæ–‡ä»¶åéšæ„ï¼Œåç¼€ä¸€å®šæ˜¯`.sh`ï¼‰ï¼Œç¼–è¾‘å¥½ä»¥åä¿å­˜ï¼Œåœ¨ç»ˆç«¯æ‰§è¡Œ `chmod +x executable-start.sh` ä½¿å…¶å…·æœ‰å¯æ‰§è¡Œæƒé™

   ```bash
   #!/bin/bash

   # è®¾ç½®ç¯å¢ƒå˜é‡, å‚è€ƒä¸Šé¢çš„ç¯å¢ƒå˜é‡è¯´æ˜
   export PORT=12020 # ç«¯å£å·
   export ADMIN_EMAIL=xxx@gmail.com # é¢æ¿ç®¡ç†å‘˜é‚®ç®±è´¦å·
   export ADMIN_PASSWORD=xxxx # é¢æ¿ç®¡ç†å‘˜å¯†ç 
   export BACKEND_API_PREFIX=xxx # é¢æ¿ç®¡ç†åç«¯ API å‰ç¼€
   export DOMAIN=https://xxx.r8d.pro
   export PASSWORD=89236475 # AES åŠ å¯†å¯†ç ï¼Œå‰ç«¯å’Œåç«¯éœ€è¦ä¿æŒä¸€è‡´
   export MAIL_HOST=smtp.gmail.com # SMTP é‚®ä»¶æœåŠ¡å™¨åœ°å€
   export MAIL_PORT=465
   export MAIL_SECURE=true
   export MAIL_USER=xxx@gmail.com # SMTP é‚®ä»¶æœåŠ¡å™¨ç”¨æˆ·å
   export MAIL_PASS=xxx # SMTP é‚®ä»¶æœåŠ¡å™¨å¯†ç 
   export MAIL_NEWUSER_SUBJECT='æ¬¢è¿åŠ å…¥ AirBuddy'
   export MAIL_NEWUSER_URL=https://xxx.com/xxx.html # æ–°ç”¨æˆ·æ³¨å†Œé‚®ä»¶æ¨¡æ¿é“¾æ¥
   
   # è¿è¡Œç¨‹åº
   /www/wwwroot/security/airbuddy-security-executable # æ›¿æ¢ä¸ºä½ çš„å®é™…è·¯å¾„
   ```

2. åœ¨è½¯ä»¶å•†åº—ä¸­æ‰“å¼€ `è¿›ç¨‹å®ˆæŠ¤ç®¡ç†å™¨`ï¼Œ(å¦‚æœæ²¡æœ‰å®‰è£…ï¼Œè¯·å…ˆå®‰è£…)ï¼Œç‚¹å‡»æ·»åŠ å®ˆæŠ¤è¿›ç¨‹ï¼Œåç§°å¤‡æ³¨éšæ„ï¼Œå¯åŠ¨ç”¨æˆ·é€‰æ‹©`root`ï¼Œè¿è¡Œç›®å½•é€‰æ‹© äºŒè¿›åˆ¶æ–‡ä»¶ å’Œ sh æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ï¼Œå¯åŠ¨å‘½ä»¤åŠ¡å¿…å¡«å†™ç»å¯¹è·¯å¾„ï¼Œç‚¹å‡»ç¡®å®šåï¼Œå³å¯å¼€å¯å®ˆæŠ¤è¿›ç¨‹ï¼Œå®ˆæŠ¤è¿›ç¨‹ä¼šè‡ªåŠ¨è¿è¡Œ `executable-start.sh` è„šæœ¬ï¼Œè„šæœ¬ä¸­ä¼šè®¾ç½®ç¯å¢ƒå˜é‡å¹¶è¿è¡ŒäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œæ­¤æ—¶ï¼Œä½ å¯ä»¥åœ¨è¿›ç¨‹å®ˆæŠ¤ç®¡ç†å™¨ä¸­çœ‹åˆ°å®ˆæŠ¤è¿›ç¨‹å·²ç»å¯åŠ¨ï¼Œå¹¶ä¸”å¯ä»¥æŸ¥çœ‹æ—¥å¿—è¾“å‡ºï¼Œç¡®ä¿æœåŠ¡æ­£å¸¸è¿è¡Œ
   ![](https://github.com/dc8683/picx-images-hosting/raw/master/docs/executable.7lk96gup8b.webp)
   ![](https://github.com/dc8683/picx-images-hosting/raw/master/docs/executable.7p3v46pkxs.webp)

3. æœåŠ¡å¯åŠ¨åï¼Œåœ¨ç½‘ç«™ - åå‘ä»£ç†ï¼Œç‚¹å‡»æ·»åŠ åä»£ï¼ŒåŸŸåè®¾ç½®ä½ å¯¹å¤–å…¬å¼€çš„åŸŸåï¼Œç›®æ ‡ url å¡«å†™æœ¬æœºåœ°å€ + compose ä¸­çš„ç«¯å£å·ï¼Œä¾‹å¦‚ä¸Šé¢compose å¯¹åº”çš„ç«¯å£ç¤ºä¾‹: http://127.0.0.1:12022 , åç§°å¯ä»¥éšæ„å¡«å†™ï¼Œä¾‹å¦‚ `airbuddy-security`ï¼Œç„¶åç‚¹å‡»æäº¤å³å¯ï¼Œå¦‚ä¸‹æ‰€ç¤º:
   ![](https://github.com/dc8683/picx-images-hosting/raw/master/docs/fandai.4n7z15bffe.webp)

æœ€åï¼Œé€šè¿‡è®¿é—® `https://ä½ é…ç½®çš„åŸŸå/api/v1/guest/comm/config` æ¥æµ‹è¯•æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œï¼Œå¦‚æœè¿”å›äº†é…ç½®æ•°æ®ï¼Œåˆ™è¡¨ç¤ºæœåŠ¡è¿è¡Œæ­£å¸¸

## è‡ªè¡Œæ„å»ºå’Œè°ƒè¯•ä½¿ç”¨

### 1.å…‹éš†é¡¹ç›®

```bash
   git clone 
```

### 2. å®‰è£…ä¾èµ–
```bash
   yarn install
```

### 3. é…ç½®ç¯å¢ƒå˜é‡
```bash
   cp .env.example .env # å¤åˆ¶ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶ => ç”Ÿäº§ç¯å¢ƒä½¿ç”¨
   cp .env.exampl .env.local # å¤åˆ¶ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶ => æœ¬åœ°è°ƒè¯•ä½¿ç”¨
```

### 4. æ„å»ºé¡¹ç›®
```bash
   yarn run build # æ„å»º js äº§ç‰©
   yarn run build:executable # æ„å»ºäºŒè¿›åˆ¶æ–‡ä»¶
   docker build -t airsecurity . # æ„å»º docker é•œåƒ
```
### 5. è¿è¡Œé¡¹ç›®
```bash
   yarn run start # å¯åŠ¨æœåŠ¡
   yarn run dev # æœ¬åœ°è°ƒè¯•
   docker run -d --name airsecurity -p 3000:3000 airsecurity # å¯åŠ¨ docker å®¹å™¨
```